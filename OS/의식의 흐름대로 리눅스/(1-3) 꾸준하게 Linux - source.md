
앞서 1-1 에서 우리는 파일 편집에 관련된 명령어를 학습했습니다. 만약 우리가 `bashrc` 라는 파일에 환경 변수를 저장하면 바로 사용할 수 있을까요? 

안타깝게도 저는 그런 줄 알았습니다. 환경 변수는 프로세스의 동작을 제어 및 구성해야되기 때문에 **메모리에 로드** 되어야 합니다.

셸 스크립트를 실행하는 과정에서 해당 파일이 메모리에 로드됩니다. 또는 로그인 셸에 접속하면 저장된 파일들을 로드한다고 합니다.

일반적으로 우리가 파일을 편집하고 셸에 다시 로그인하지 않고 작업을 이어나갑니다. 그렇기 떄문에 환경 변수를 이용하려면 해당 파일을 로드해야 합니다.


예시)

![[Pasted image 20230820144535.png]](https://github.com/JxxHxxx/TIL_2023/blob/master/OS/%EC%9D%98%EC%8B%9D%EC%9D%98%20%ED%9D%90%EB%A6%84%EB%8C%80%EB%A1%9C%20%EB%A6%AC%EB%88%85%EC%8A%A4/images/Pasted%20image%2020230820144535.png)

환경 변수를 지정하기 위해 `bashrc` 파일을 편집하였습니다. YEAR 는 이미 로드된 변수이고 PREV_YEAR 는 아직 로드되지 않은 변수입니다.

그래서 PREV_YEAR 변수를 출력 명령을 내려도 예상한 결과가 나오지 않습니다.

![[Pasted image 20230820144705.png]](https://github.com/JxxHxxx/TIL_2023/blob/master/OS/%EC%9D%98%EC%8B%9D%EC%9D%98%20%ED%9D%90%EB%A6%84%EB%8C%80%EB%A1%9C%20%EB%A6%AC%EB%88%85%EC%8A%A4/images/Pasted%20image%2020230820144705.png)


이제 왜 로드가 필요한지 알게되었죠? `source` 명령어를 이용해서 로드해봅시다.

![[Pasted image 20230820144907.png]](https://github.com/JxxHxxx/TIL_2023/blob/master/OS/%EC%9D%98%EC%8B%9D%EC%9D%98%20%ED%9D%90%EB%A6%84%EB%8C%80%EB%A1%9C%20%EB%A6%AC%EB%88%85%EC%8A%A4/images/Pasted%20image%2020230820144907.png)


#### source

source 는 파일에서 명령어를 읽어 실행합니다. 참고로 `source` 는 `.` 과 동일합니다. 

앞서 파일을 실행하면 메모리에 로드된다고 했습니다. 그렇다면 굳이 파일을 그냥 실행시키지 않고 `source` 명령어를 사용하는 이유는 무엇일까요? 

source 명령어는 지정한 파일 안의 커맨드 라인을 마치 셸에서 직접 입력한 것과 동일하게 실행합니다. source 명령어를 사용하면 **셔뱅**으로 지정한 셸이 아니라 언제나 현재 셸이 사용됩니다. 그리고 파일을 직접 실행하는 것이 아니기 때문에 **파일에 실행 권한을 부여할 필요가 없습니다.**


*더 알아보기*
셔뱅이란 어떤 셸을 사용할지 명시적으로 선언하는 것을 말한다. 리눅스에는 `sh` ,`bash`  등 셸이 다양합니다. 그렇기 때문에 셔뱅을 입력하지 않을 경우 파일이 정상적으로 실행되지 않을 수도 있습니다.

```
/bin/bash ./hello.sh // 이런식으로 파일을 실행해야함 (꼭 명시해야 하는건 아닌듯?)
./hello.sh // 셔뱅을 입력했을 경우
```

