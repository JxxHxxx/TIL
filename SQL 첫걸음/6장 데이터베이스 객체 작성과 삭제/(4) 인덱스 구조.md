
색인이라고도 불리는 인덱스는 데이터베이스 객체 중 하나입니다. 이 절에서는 인덱스란 무엇이며 역할과 구조는 어떻게 이루어지는지 알아보겠습니다.


### 인덱스

`테이블`에는 인덱스를 작성할 수 있습니다. 인덱스는 테이블에 붙여진 **색인**입니다. 인덱스의 역할은 검색속도의 향상입니다. 여기서 검색이란 `SELECT` 명령에 `WHERE` 구조 조건을 지정하고 그에 일치하는 행을 찾는 일련의 과정을 말합니다.

인덱스는 테이블과는 별개로 **독립된** 객체로 작성됩니다. 인덱스는 별개로는 큰 의미가 없습니다. 목차밖에 없는 책은 용도가 없는 것과 유사합니다. 인덱스는 테이블에 의존하는 객체입니다. 대부분의 데이터베이스에서는 테이블을 삭제하면 인덱스도 같이 삭제됩니다.



### 검색에 사용하는 알고리즘

대량의 데이터를 인덱스를 통해 효율적으로 검색할 수 있는 이유는 검색에 사용되는 알고리즘 덕분입니다. 대표적인 알고리즘으로는 **이진 트리**가 있습니다.


##### - 풀 테이블 스캔
인덱스가 지정되지 않은 테이블을 검색할 때는 풀 테이블 스캔이라 불리는 검색 방법을 사용합니다. 테이블에 저장된 모든 값을 처음부터 차례로 조사해나갑니다. 행이 1,000건이 있다면 최대 1,000번 값을 비교합니다.


##### - 이진 탐색
이진 탐색은 차례로 나열된 집합에 대해 유효한 검색방법입니다. 처음부터 순서대로 조사하는 것이 아니고 집합을 반으로 나누어 조사합니다.

![[Pasted image 20230829223554.png]]


그림처럼 숫자의 크기대로 순서대로 정렬되어 있습니다. 
1. 66을 찾고 싶다고 할 때 가운데 값인 40을 기준으로 절반을 나눕니다. 
2. 66은 40보다 크기 때문에 오른쪽에 있을 것입니다. 
3. 다시 40과 90을 기준으로 절반으로 나눕니다.
4. 40 ~ 66, 69 ~90 로 나눕니다. 66은 69보다 작기 때문에 40 ~ 66 사이에 있을 것입니다.

이진 탐색은 이런식으로 진행됩니다. 현재는 데이터가 적지만 데이터의 수가 기하급수적으로 늘어난다면 풀 테이블 스캔보다 이진 탐색이 압도적인 우위에 있습니다.


##### - 이진 트리
이진 탐색은 고속으로 검색할 수 있지만 데이터가 미리 정렬되어 있어야 합니다. 하지만 테이블 내 행을 언제나 정렬된 상태로 두는 것은 비용이 많이 듭니다.

일반적으로는 테이블에 인덱스를 작성하면 테이블 데이터와 별개로 인덱스용 데이터가 저장장치에 만들어집니다. 이때 이진 트리라는 데이터 구조로 작성됩니다.

이진 트리는 아래와 같은 구조로 만들어집니다.

![[Pasted image 20230829224610.png]]


검색 방법은 이진 탐색과 거의 비슷합니다. 원하는 수치와 비교해서 더 크면 오른쪽 가지를, 작으면 왼쪽 가지를 따라 이동하기만 하면 됩니다. 6을 찾는다고 해봅시다.

1. 6은 10보다 작습니다. 왼쪽 가지를 탑니다.
2. 6은 5보다 큽니다. 오른쪽 가지를 탑니다.

### 유일성

이진 트리에서는 집합 내에 중복하는 값을 가질 수 없습니다. 만약 같은 값을 가질 수 있다면 `작다` . `크다` 그리고 `같다` 라는 제 3가 경우의 수가 존재해야 합니다. 그리고 이는 제 3의 가지를 표현해야하는 상황이 나옵니다. 그래서 기본키 제약에는 **유일성**을 가지게 하는 경우가 많은 것 같습니다.

