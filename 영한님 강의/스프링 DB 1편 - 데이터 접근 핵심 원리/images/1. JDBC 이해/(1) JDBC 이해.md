
### JDBC 등장 이유

웹/앱 애플리케이션에서 중요한 데이터들은 DB에 존재한다. 그리고 DB는 WAS 뒷단에 존재하게 된다. 결국 WAS/DB 간의 연결 및 통신이 필요하게 된다.

간략히 총 3단계가 존재한다.

- 커넥션 연결
- SQL 전달
- 결과 응답

여기서 한 가지 에로사항은 DB 마다 위 과정의 방식에 차이가 존재한다는 점이다. 참고로 RDBMS는 종류도 다양하고 특정 벤더사가 점유율을 독점하는 형태가 아니다. 그래서 DB가 변경되면 위 3가지 과정에 대한 로직을 모두 변경해야하는 아주 아주 귀찮고 힘든 작업이 기다리게 된다.

이 과정을 추상화해서 표준으로 만든 것이 `JDBC 표준 인터페이스`이다.

![[Pasted image 20230930173537.png]]


애플리케이션 로딩 시점 혹은 컴파일 단계에서 사용할 DB 드라이버만 정해주면 인터페이스에 해당하는 구현체가 등록되는 방식이다. JDBC 등장으로 다음 문제가 일부 해결된 것이다.

- DB가 변경되었을 때 애플리케이션 서버 코드를 변경해야하는 문제


### 진짜 문제...
---
커넥션을 맺거나 결과를 응답하는 방식은 JDBC 등장으로 거의 해결이 되었다. 설정 파일에 `driver-class` , `url` ,`DB/SID` 같은 메타 데이터만 변경해주면 되는 수준이다.

하지만 문제는 `SQL`이다. `SQL` 에도 표준이 존재하지만 모든 문제를 표준 `SQL` 으로 해결할 수 없다.  쿼리는 말 할 필요도 없이 DB 벤더마다 데이터 타입이 다르다. 문자열을 취급할 때 `mssql : nvarchar` , `mysql : varchar` , `oracle : varchar2`  이런 식으로 차이가 존재한다.

결국 DB가 변경되면 이런 부분을 모두 변경해야 한다. 이런 문제 또한 `ORM` 기술을 쓰면 획기적으로 줄일 수 있다. 


*여담*

현재 재직중인 회사는 프로젝트 하나에서 `mssql` , `postgresql` , `oracle` , `mysql` 총 4개 DB가 사용된다. 정확히 말하면 동일한 기능의 SQL을 각 DB에 맞게 구현해 놓은 형태이다.  

사실 여러개를 사용하지 않아도 되는 BM 구조인데 아마도 DB 선택권이 클라이언트에게 있기 때문이 아닐까 생각한다. 멋모르는 나로서는 JPA 이를 구현한다면 훨씬 간단하게 해결될 문제라고 생각한다.

굳이 잘 돌아가는 애플리케이션에 변화를 줄 필요가 있느냐라고 생각할 수도 있고 JPA를 사용했을 때 단점도 분명히 존재한다. 아주 작게는 새로운 기술을 모두가 공부해야한다는 문제, 쿼리가 의도한대로 나가지 않는 문제 등.

하지만 유지 보수 관점, 나아가 애플리케이션을 고도화해야하는 관점에서는 JPA를 사용하는 것이 좋다고 생각한다. 왜냐하면 구현해놓은 DB 벤더 수 만큼의 작업을 JPA에서는 한 번에 처리할 수 있기 떄문이다.





