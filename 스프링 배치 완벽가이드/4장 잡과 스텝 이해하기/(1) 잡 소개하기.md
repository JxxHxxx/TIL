번역서를 나름대로 해석하여 정리하기 때문에 잘못된 내용이 있을 수 있습니다.


##### 잡(job) 특징
---

- 유일하다 : 스프링 배치의 잡은 스프링 빈을 등록하는 것과 동일하게 구성할 수 있다는 의미, 즉 싱글톤으로 등록하여 필요한 만큼 잡을 실행할 수 있다. 잡을 여러 번 실행하려고 동일한 잡을 여러번 정의할 필요가 없다는 말과 동일하다.
   
- 순서를 가진 여러 스텝의 목록이다 

- 처음부터 끝까지 실행 가능하다

- 독립적이다 : 각 배치 잡은 외부 의존성에 영향을 받지 않고 실행할 수 있어야 한다. 그렇다고 의존성을 가질 수 없다는 것을 의미하는 것은 아니다. 예를 들어 특정 파일을 처리하는 배치가 있다고 하자. 만약 파일이 없다면 오류를 자연스럽게 처리하고 파일이 없다고해서 파일이 전달될 때까지 기다리지 않는다. 잡의 실행은 스케줄러 같은 것이 책임진다. 대신 잡은 자신의 처리하기로 정의된 모든 요소를 제어할 수 있어야 한다.



##### 잡의 생명주기 따라가보기
----
잡의 실행은 생명주기대로 진행된다. 잡의 정의는 스프링 배치가 잡의 인스터스를 생성하는데 필요한 청사진이다.

잡의 실행은 잡 러너(`job runner`)에서 시작된다. 잡 러너는 잡 이름과 여러 파라미터를 받아들여 잡을 실행시키는 역할을 한다. 스프링 배치는 두 가지 잡 러너를 제공한다.

- `CommandLineJobRunner` : 스크립트를 이용하거나 명령행에서 직접 잡을 실행할 때 사용한다.

- `JobRegistryBackgroundJobRunner` : 스프링을 부트스트랩해서 기동한 자바 프로세스 내에서 쿼츠(`Quartz`), `JMX` 후크 같은 스케줄러를 사용해 잡을 실행한다면, 스프링이 부트스트랩될 때 실행 가능한 잡을 가지고 있는 `JobRegistry` 를 생성한다. `JobRegistryBackgroundJobRunner` 는 `JobRegistry` 를 생성하는데 사용한다.


##### JobLauncher
---
스프링 배치를 실행할 때 잡의 실제 진입점은 잡 러너가 아닌 `JobLauncher` 인터페이스의 구현체(`SimpleJobLauncher`)이다.  이 클래스는 요청된 잡을 실행할 때 코어 스프링의 `TaskExecutor` 인터페이스를 사용한다.


##### JobInstance
---
`JobLauncher` 가 배치 잡을 실행하면 `JobInstance` 가 생성된다.  
`JobInstance` 는 한 번 성공적으로 완료되면 다시 실행시킬 수 없다. 여기서 `JobInstance`는 *잡 이름*, 잡에 전달돼 실행 시에 사용되는 *식별 파라미터* 2가지로 식별되는데 동일한 식별 파라미터를 사용하는 잡은 한 번만 실행할 수 있다는 의미이다.

잡의 실행과 잡의 실행 시도는 다른 개념이다.  잡 실행을 시도할 때 스프링 배치는 `JobRepository` 가 사용하는 `BATCH_JOB_INSTANCE` , `BATCH_JOB_EXECUTION_PARAMS` 테이블을 사용해 잡 인스턴스를 식별한다.

(`BATCH_JOB_INSTANCE.JOB_KEY` 는 잡 이름과 식별 파라미터의 해시 값이다.)

`JobExecution` 은 잡 실행의 실제 시도를 의미한다. 잡이 처음부터 끝까지 단번에 실행 완료됐다면 해당 `JobInstance` 의 `JobExecution` 은 단 하나씩만 존재한다.

첫 번째 잡 실행 후 오류 상태로 종료됐다면, 해당 `JobInstance` 를 실행하려고 시도할 때마다 새로운 `JobExecution` 이 생성된다. 잡을 실행할 때 생성하는 각 `JobExecution` 은 `BATCH_JOB_EXECUTION` 테이블 레코드로 저장된다. 또한 `JobExecution` 이 실행될 때 상태는 `BATCH_JOB_EXECUTION_CONTEXT` 테이블에 저장된다. 잡에서 오류가 발생하면 스프링 배치는 이 정보를 이용해 올바른 지점에서부터 다시 잡을 시작할 수 있다.
